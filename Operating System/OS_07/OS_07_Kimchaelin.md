# 메모리 단편화의 정의와 종류
프로세스는 독립된 메모리 공간을 가지므로, Swapping을 통해 CPU 할당 시간이 끝난 프로세스의 메모리를 보조 기억장치로 내보내고 다른 프로세스의 메모리를 주 기억장치에 불러와서 메모리 관리를 함.
- Swap-in : 주 기억장치(RAM)로 불러오는 과정
- Swap-out : 보조 기억장치로 내보내는 과정

#### 메모라 단편화란?
메모리 적재 및 제거가 반복되면서 프로세스들이 차지하는 메모리 틈 사이에 사용하지 못할 만큼의 작은 공간.
- 발생하는 문제
  - 총 메모리 공간은 충분하지만 실제 사용이 불가.
  - 실제 사용 가능한 공간이 줄어들어 보조 기억장치를 읽는 일에 잦아짐 (시스템 성능 저하)
- 종류
  - 외부 단편화
  - 내부 단편화

# 내부 단편화와 외부 단편화의 차이점
- 외부 단편화
    - RAM에 적재와 제거를 반복하면 할당할 수 없는 작은 공간들이 생기는 것
- 내부 단편화
    - 프로세스가 필요한 양보다 더 큰 메모리가 할당되어서 메모리 낭비되는 것

# 해결 방법
#### 1. Paging(페이징) - 외부 단편화 해경, 내부 단편화 존재
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FkTRg1%2FbtrsWKBL1Yv%2FXMO4Um3MYwDlIYPCkxS6g0%2Fimg.png">

- 프로세스를 일정 크기로 잘게 쪼개어 순서와 상관없이 사용하지 않는 프레임을 페이지에 옮기고, 필요한 메모리를 페이지 단위로 프레임에 옮기는 방식
- 페이지와 프레임을 대응시키기 위해 페이징 테이블이 존재
- 배치 순서는 상관없기 때문에 외부 단편화 문제를 해결할 수 있음. but, 내부 단편화가 발생할 수 있음.
- 내부 단편화 예시
  - 페이지 크기가 100B이고 프로세스가 310B의 메모리를 요구한다면 3개의 페이지 프레임이 생성되고 10B 가 남기 때문에 1개가 더 생성됨. 결국 마지막 페이지 프레임은 90B의 내부 단편화 발생
###### 페이지 : 가상메모리를 같은 크기의 블록으로 나눈 것
###### 프레임 : RAM을 페이지와 같은 크기로 나눈 것

#### 2. 세그먼테이션 - 내부 단편화 해결, 외부 단편화 존재
<img src="https://velog.velcdn.com/images/hanhs4544/post/2104f437-1c2a-4c60-945f-5803db6ce396/image.png">

- 고정된 크기가 아닌 서로 다른 크기의 논리적 단위인 세그먼트(Segment)로 분할하는 방식
- page 처럼 크기가 동일하지 않기 때문에 세그먼트 번호와 시작 주소(base), 세그먼트 크기(limit)를 가짐
- 다른 크기의 세그먼트들이 메모리에 적재되고 제거되다 보면, 사용할 수 없을 정도로 작은 공간이 생김. (외부 단편화 발생)

#### 3. Memory Pool(메모리 풀) - 내분 단편화, 외부 단편화 모두 해결. 메모리 누수 존재
- memory pool에 동일한 크기의 메모리 블록들을 미리 할당해 놓고 프로세스들이 필요할 때마다 사용하고 반납하는 기법
- 미리 할당하기 때문에 메모리 누수가 있음.
- 미리 공간을 할당해놓고 사용하고 반납하기 때문에 외부 단편화는 발생하지 않음
- 필요한 크기만큼 할당을 하기 때문에 내부 단편화도 발생하지 않음. 
- 메모리의 할당, 해제가 빈번할 때 효과적
###### 메모리 누수 : 컴퓨터 프로그램이 필요하지 않은 메모리를 계속 점유하고 있는 현상
