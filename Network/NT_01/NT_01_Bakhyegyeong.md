# TCP/UDP

데이터 전달을 담당하는 전송계층의 프로토콜

→ **전송계층은 IP에 의해 전달되는 패킷의 오류를 검사하고 재전송 요구 등의 제어를 담당**하는 계층

## TCP

**신뢰성을 보장하는 연결형 서비스**

→ 3-way handshaking 과정을 통해 연결을 설정하고 4-way handshaking 을 통해 연결을 해제한다.

### 제공하는 기능

1. **흐름 제어** : 데이터 처리 속도를 조절하여 수신자의 버퍼 오버플로우를 방지
2. **혼잡 제어** : 네트워크 내의 패킷 수가 넘치지 않도록 패킷 전송을 제어
3. **신뢰성이 높은 전송** : ACK값을 확인하거나 수신 시간을 확인해 패킷의 이상을 감지하고 재전송을 요청

### TCP Header

![](https://nesoy.github.io/assets/posts/20181010/1.png)

- 발신지와 수신지의 포트 주소
- 시퀀스 번호 : 송신자가 지정하는 순서 번호
- 응답 번호 (ACK number) : 수신한 바이트의 수를 응답하기 위해 사용
- 데이터 오프셋 : 데이터의 시작 위치를 표현 (TCP 헤더의 크기)
- 윈도우 크기 : 수신 윈도우의 버퍼 크기를 지정
- 체크섬 : 데이터에 대한 오류 검출

## TCP와 UDP의 차이점

- TCP : **3-way-handshaking**을 통해 세션을 생성하고 데이터를 전송
    
    → 전송 순서 보장/수신 여부 확인 + 데이터 재전송하는 등의 기능을 제공
    
    → 데이터의 손실률이 낮다는 장점이 있다.
    
    → **연속성보다는 신뢰성**이 필요한 메일, 메시지 같은 분야에서 사용된다.
    

- UDP : 별 다른 절차 없이 데이터를 전송
    
    → 전송 순서 보장 X / 수신 여부 확인 X 
    
    → 데이터의 손실률이 높지만 별다른 절차를 거치지 않기에 속도가 빠르다.
    
    → **신뢰성보다는 연속성이 중요**한 스트리밍 같은 분야에서 사용된다.

<br> 

|  | TCP | UDP |
| --- | --- | --- |
| 프로토콜 종류 | 연결지향형 프로토콜 | 비 연결지향형 프로토콜 |
| 스트림 | 바이트 스트림을 통한 연결 | 메세지 스트림을 통한 연결 |
| 제공 기능 | 혼잡제어, 흐름제어 | 혼잡제어와 흐름제어 지원 X |
| 순서 보장 | 순서 보장, 상대적으로 느림 | 순서 보장되지 않음, 상대적으로 빠름 |
| 데이터 전송 보장 | 수신 여부 확인 <br> → 신뢰성 있는 데이터 전송 | 수신 여부 확인 X <br> → 데이터 전송 보장 X |
| 패킷 | 세그먼트 TCP 패킷 | 데이터그램 UDP 패킷 |
| 주 사용처 | HTTP, Email, File transfer에서 사용 <br> → **연속성보다는 신뢰성** | DNS, Broadcasting에서 사용 <br> → **신뢰성보다는 연속성** |