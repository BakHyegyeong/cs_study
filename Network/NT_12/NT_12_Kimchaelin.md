# 로드 밸런싱과 클러스터링의 차이를 설명해주세요.

## 로드 밸런싱
<img src="https://velog.velcdn.com/images/cks8483/post/20097706-a5e3-48ed-af48-606f085dd006/image.png" width="70%">

- 서버에 들어오는 트래픽을 여러 서버로 분산시켜 서버의 부하를 분산시키는 기술

#### 주요 기능
- **부하 분산**: 서버에 들어오는 트래픽을 여러 서버로 분산시켜 서버의 부하를 분산시킴
- **장애 극복**: 특정 서버에 장애가 발생해도 다른 서버가 요청을 처리하여 서비스 중단을 방지

#### 방법
- **라운드 로빈**: 순차적으로 서버에 요청을 분배하는 방식
- **가중 라운드 로빈**: 서버의 성능에 따라 가중치를 부여하여 요청을 분배하는 방식
- **최소 연결**: 요청이 가장 적은 서버에 요청을 보내는 방식
- **IP 해시**: 클라이언트의 IP 주소를 해시값으로 변환하여 서버를 선택하는 방식

#### 종류
- **L4 로드밸런서**: 전송 계층(4계층)에서 IP 주소, 포트 번호를 기반으로 분산
- **L7 로드밸런서**: 응용 계층(7계층)에서 HTTP 헤더, 쿠키 등을 기반으로 분산

## 로그인 시 발생하는 문제점
- 로드 밸런싱이 필요한 대규모 트래픽이 발생하는 서비스에서는 **세션 관리에 문제**가 생길 수 있다.
- A 서버에 로그인을 하면 세션 정보가 A 서버에 저장되어 있기 때문에, B 서버로 요청을 보내면 세션 정보가 없어져 로그인이 풀리는 문제가 발생한다.
### 해결방법 
- **세션 고정**을 사용
  - 클라이언트의 첫 요청에 대해 응답을 준 서버에 클라이언트의 요청 처리를 고정시키는 방법 ex) A 서버에 로그인하면 계속 A 서버로 요청을 보내는 방법
- **세션 클러스터링**을 사용
  - 여러 WAS의 세션을 하나로 묶어 하나의 세션으로 관리하는 방법 ex) Redis를 사용하여 세션 서버를 따로 두고 세션을 일치시키는 방법

## 클러스터링
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdipOSL%2FbtqwdMjhAeP%2FokMQkG82YluqjEU7kNGBwK%2Fimg.png" width="70%">

- 여러 대의 컴퓨터를 가상의 하나의 컴퓨터처럼 사용하게 해주는 것

#### 주요 기능
- **고가용성**: 서버의 장애 시 다른 서버가 서비스를 대신 제공하여 서비스 중단을 방지
- **부하 분산**: 여러 서버에 트래픽을 분산시켜 서버의 부하를 분산시킴
- **데이터 공유**: 여러 서버가 데이터를 공유하고 동기화하여 데이터의 일관성을 유지

#### 종류
- **고가용성 클러스터**: 장애 발생 시 자동 복구
- **부하 분산 클러스터**: 로드 밸런싱과 결합해 트래픽 분산
- **컴퓨팅 클러스터**: 대규모 계산 작업을 분산 처리

## 로드밸런싱 vs 클러스터링
- 로드밸런싱과 클러스터링 모두 Scale-out 방식으로 성능을 향상시키는 기술이다.

### 로드 밸런싱
- 서버의 부하를 분산시켜 서버의 성능을 향상시키는 것이다.
- 로드밸런서 + 여러 서버 형태를 띄고 있다.
- 초점이 서버의 부하 분산에 있다.

### 클러스터링
- 여러 대의 서버를 하나로 묶어 성능을 향상시키는 것이다.
- 각 클러스터끼리 데이터를 공유하고 동기화하여 하나의 서버처럼 동작한다.
- 초점이 한 서버가 죽어도 서비스가 중단되지 않도록 하는 것에 있다.

###### scale-up: 하드웨어의 성능을 높여, 서버 성능을 향상시키는 방식
###### scale-out: 여러 대의 서버가 나눠서 동작하도록 하여 성능을 개선하는 방식
